<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../style/setting.css" />
    <title>Setting</title>
  </head>
  <body>
    <div class="main">
      <button id="show-info12">Show info</button>

      <div class="info" style="display: none">
        <br />

        <label>name</label>
        <input type="text" placeholder="enter the name" id="nameTextField" />
        <button id="ename">Edit</button><br />

        <label>age</label>
        <input type="text" placeholder="enter the name" id="ageTextField" />
        <button id="eage">Edit</button> <br/>
        <label>password</label>
        <input type="text" placeholder="enter the name" id="passTextField" />
        <button id="epass">Edit</button><br />

        <label>Image Path</label>
        <input type="text" placeholder="enter the name" id="imgTextField" />
        <button id="eimg">Edit</button><br />
        <button id="submit-Sec-1">submit</button>
        <button id="submit-Sec-1" class="loginbtn"style="display: none;"><a href="../Form/Login.html">Login</a></button>
        <p class="resluts" style="color:red">you have left <span id="reslut"></span> </p>
      </div>
    </div>
  </body>
  <script >
    // loading Data

    let STORAGE_KEY = "StudentFormData";
    let CurrentUserKey = "CurrentUser";
    let UserInfoObj = JSON.parse(localStorage.getItem(CurrentUserKey)) || {};
    let LogDataInfo = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    
    // Dom Element

    //button feild
    let shwoInfoBtn = document.querySelector("#show-info12");
    let textinputbtn = document.querySelector("#ename");
    let ageinputbtn = document.querySelector("#eage");
    let passinputbtn = document.querySelector("#epass");
    let Imginputbtn = document.querySelector("#eimg");
    let submitbtn = document.querySelector("#submit-Sec-1");
    let result = document.querySelector(".reslut");

    //txt filed of Dom element

    let nameValue = document.querySelector("#nameTextField");
    let ageValue = document.querySelector("#ageTextField");
    let passValue = document.querySelector("#passTextField");
    let imgSrcValue = document.querySelector("#imgTextField");
    //by defalut the input feild is disabled

    nameValue.disabled = true;
    ageValue.disabled = true;
    passValue.disabled = true;
    imgSrcValue.disabled = true;

    // will check to edit the field
    console.log("hello wordl");

    // click event

    textinputbtn.addEventListener("click", EditBtn(nameValue));
    ageinputbtn.addEventListener("click", EditBtn(ageValue));
    passinputbtn.addEventListener("click", EditBtn(passValue));
    Imginputbtn.addEventListener("click", EditBtn(imgSrcValue));
    shwoInfoBtn.addEventListener("click", Click);
    submitbtn.addEventListener("click", Submit);

    // function
    function Switchcondition(nameValue) {
      switch (nameValue) {
        case true:
          return false;

          break;

        case false:
          return true;

          break;

        default:
          break;
      }
    }
    function EditBtn(value) {
      return function () {
        value.disabled = Switchcondition(value.disabled);
      };
    }
    function Click() {
      LoadDefalut();
      console.log("hello world");

      let displayValue = document.querySelector(".info").style.display;
      switch (displayValue) {
        case "none":
          document.querySelector(".info").style.display = "block";
          break;
        case "block":
          document.querySelector(".info").style.display = "none";
          break;
        default:
          break;
      }
    }
    function Check(input) {
      if (!input.value) {
        console.log("not a value");
        return false;
      }
      return true;
    }
    function ClearEveything() {
      nameValue.disabled = true;
      ageValue.disabled = true;
      passValue.disabled = true;
      imgSrcValue.disabled = true;
      nameValue.value = "";
      ageValue.value = "";
      passValue.value = "";
      imgSrcValue.value = "";
    }
    function SaveData() {
      localStorage.setItem("CurrentUser", JSON.stringify(UserInfoObj));
    }
    
    function AssignValueToInputFeild(name,age,pass,imgsrc) {
        nameValue.value =   name;
        ageValue.value =    age;
        passValue.value =   pass;
        imgSrcValue.value = imgsrc;
    }
    function DisabledAllEdit() {
        textinputbtn.disabled = true;
        ageinputbtn.disabled = true;
        passinputbtn.disabled = true;
        Imginputbtn.disabled = true;
        shwoInfoBtn.disabled = true;
        
    }
function timeouts(remainingTime){
        let h3 = document.createElement('p');
        let secoundLeft = Math.floor(remainingTime/1000); // convert like 10000/1000 = 10sec
        h3.style.display = 'inline-block'
        
        let interval = setInterval(() =>
        {
          if(secoundLeft<=-1){// condition when the time is out 
            clearInterval(interval);
            h3.innerHTML = "Plase login";
            document.querySelector(".loginbtn").style.display = 'block'
            document.querySelector(".resluts").style.display = 'none'
            // console.log(secoundLeft)
            return;
          }
          h3.innerHTML=`${secoundLeft}`;              
          secoundLeft--;
        
        }
        ,1000)
        
        return h3;
   }

    function LoadDefalut() {
      if (Object.keys(UserInfoObj).length == 0) {
        UserInfoObj = {
          name: "please enter name by logining",
          age: "plese enter age by longing ",
          password: "please enter password by logining",
          src: "please enter src by logining",
        };
        AssignValueToInputFeild(UserInfoObj.name,UserInfoObj.age,UserInfoObj.password,UserInfoObj.src)
        DisabledAllEdit()
        submitbtn.disabled = true;
        let setime = 3000; // 3sec
        let div = timeouts(setime);
        let finalspan = document.querySelector('#reslut')
        finalspan.appendChild(div);
        console.log(finalspan);
      } else {
        AssignValueToInputFeild(UserInfoObj.name,UserInfoObj.age,UserInfoObj.password,UserInfoObj.src)
      } 
    }
    function AssignValueToUserObj(name,age,pass,src) {
        UserInfoObj.name = name;
        UserInfoObj.age  = age;
        UserInfoObj.password = pass
        UserInfoObj.src  = src
    }
    function Submit(e) {
      e.preventDefault();
      AssignValueToUserObj(nameValue.value,ageValue.value,passValue.value,imgSrcValue.value)
      SaveData();
      ClearEveything();
      LoadDefalut();
    }
  </script>
</html>
